{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\sopan\\\\OneDrive\\\\Documents\\\\Personal Projects\\\\Project-Share\\\\web\\\\src\\\\Components\\\\Posts\\\\Posts.js\";\nimport React, { useEffect, useState } from 'react';\nimport { Fetch } from '../../Tools';\nimport Input from './Input';\nimport List from './List';\n\nconst Posts = props => {\n  const [comments, setComments] = useState(false);\n  const [c, setC] = useState(null);\n  const [liked, setLiked] = useState();\n  const [likes, setLikes] = useState(props.likes);\n  const [display, setDisplay] = useState(null);\n  const [likesButton, setButton] = useState( /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => setLiked(true),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 13,\n      columnNumber: 9\n    }\n  }, \"Unlike\"));\n  const [deleteBut, setDeleteButton] = useState(null);\n\n  const cut = () => {\n    const scoped = async () => {\n      const res = await Fetch(`\n                mutation {\n                    deletePost(id: \"${props.postId}\")\n                } \n            `);\n\n      if (res.deletePost == true) {\n        alert('Succesfully Deleted Post');\n      } else {\n        alert('Failed to Delete Post');\n      }\n\n      window.location.reload(false);\n    };\n\n    if (window.confirm('Are you sure you want to delete this post?')) {\n      scoped();\n    }\n  };\n\n  useEffect(() => {\n    const scoped = async () => {\n      const res = await Fetch(`\n                {\n                    getComments(id: \"${props.postId}\") {\n                        id\n                        body\n                        author\n                    }\n                }\n            `);\n\n      if (res) {\n        setC(res.getComments);\n        console.log(res.getComments);\n      }\n    };\n\n    scoped();\n\n    if (liked) {\n      like();\n    } else if (liked == false) {\n      unlike();\n    } else {\n      setButton( /*#__PURE__*/React.createElement(\"button\", {\n        disabled: \"true\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 17\n        }\n      }, \"Like\"));\n    }\n  }, [liked]);\n  useEffect(() => {\n    if (comments == true) {\n      setDisplay( /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 17\n        }\n      }, c ? c.map(ca => /*#__PURE__*/React.createElement(List, {\n        author: ca.author,\n        body: ca.body,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 41\n        }\n      })) : /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 87\n        }\n      }, \"Loading...\"), sessionStorage.getItem('token') ? /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(Input, {\n        id: props.postId,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 29\n        }\n      })) : /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        disabled: \"true\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 29\n        }\n      }), /*#__PURE__*/React.createElement(\"button\", {\n        disabled: \"true\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 29\n        }\n      }, \"Comment\"))));\n    } else if (comments == false) {\n      setDisplay(null);\n    }\n  }, [comments]);\n  useEffect(() => {\n    setButton( /*#__PURE__*/React.createElement(\"button\", {\n      onClick: () => setLiked(!liked),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 13\n      }\n    }, \"Like\"));\n\n    if (props.author == sessionStorage.getItem('handle')) {\n      setDeleteButton( /*#__PURE__*/React.createElement(\"button\", {\n        onClick: cut,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 21\n        }\n      }, \"Delete Post\"));\n    } else {\n      setDeleteButton(null);\n    }\n\n    if (sessionStorage.getItem(props.postId)) {\n      setButton( /*#__PURE__*/React.createElement(\"button\", {\n        disabled: \"true\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 17\n        }\n      }, \"Likes\"));\n    }\n  }, []);\n\n  const like = () => {\n    const scoped = async () => {\n      const res = await Fetch(`\n                mutation {\n                    likePost(id:\"${props.postId}\", current_like: ${likes})\n                } \n            `);\n      setLikes(res.likePost);\n      sessionStorage.setItem(props.postId, 'true');\n      setButton( /*#__PURE__*/React.createElement(\"button\", {\n        onClick: () => setLiked(!liked),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 17\n        }\n      }, \"Unlike\"));\n    };\n\n    scoped();\n  };\n\n  const unlike = () => {\n    const scoped = async () => {\n      const res = await Fetch(`\n                mutation {\n                    unlikePost(id: \"${props.postId}\", current_like: ${likes})\n                }\n            `);\n      setLikes(res.unlikePost);\n      sessionStorage.removeItem(props.postId);\n      setButton( /*#__PURE__*/React.createElement(\"button\", {\n        onClick: () => setLiked(!liked),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 17\n        }\n      }, \"Like\"));\n    };\n\n    scoped();\n\n    if (props.author == sessionStorage.getItem('handle')) {\n      setDeleteButton( /*#__PURE__*/React.createElement(\"button\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        src: \"data:image/png;base64,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\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 21\n        }\n      })));\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    key: props.postId,\n    className: \"post-content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"post-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 13\n    }\n  }, props.title), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"post-category\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 13\n    }\n  }, \"Category: \", /*#__PURE__*/React.createElement(\"a\", {\n    href: `http://localhost:3000/category/${props.category}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 52\n    }\n  }, props.category)), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"post-author\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 13\n    }\n  }, \"Author: \", /*#__PURE__*/React.createElement(\"a\", {\n    href: `http://localhost:3000/user/${props.author}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 48\n    }\n  }, props.author)), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"post-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 13\n    }\n  }, props.children), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"post-likes\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 13\n    }\n  }, likesButton, \": \", likes), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"post-comment-button\",\n    onClick: () => setComments(!comments),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 13\n    }\n  }, \"Comments\"), display, deleteBut);\n};\n\nexport default Posts;","map":{"version":3,"sources":["C:/Users/sopan/OneDrive/Documents/Personal Projects/Project-Share/web/src/Components/Posts/Posts.js"],"names":["React","useEffect","useState","Fetch","Input","List","Posts","props","comments","setComments","c","setC","liked","setLiked","likes","setLikes","display","setDisplay","likesButton","setButton","deleteBut","setDeleteButton","cut","scoped","res","postId","deletePost","alert","window","location","reload","confirm","getComments","console","log","like","unlike","map","ca","author","body","sessionStorage","getItem","likePost","setItem","unlikePost","removeItem","title","category","children"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { Fetch } from '../../Tools';\r\nimport Input from './Input';\r\nimport List from './List';\r\n\r\nconst Posts = (props) => {\r\n    const [comments, setComments] = useState(false);\r\n    const [c, setC] = useState(null);\r\n    const [liked, setLiked] = useState();\r\n    const [likes, setLikes] = useState(props.likes);\r\n    const [display, setDisplay] = useState(null);\r\n    const [likesButton, setButton] = useState((\r\n        <button onClick={() => setLiked(true)}>Unlike</button>\r\n    ));\r\n    const [deleteBut, setDeleteButton] = useState(null);\r\n\r\n    const cut = () => {\r\n        const scoped = async () => {\r\n            const res = await Fetch(`\r\n                mutation {\r\n                    deletePost(id: \"${props.postId}\")\r\n                } \r\n            `);\r\n            if(res.deletePost == true) {\r\n                alert('Succesfully Deleted Post');\r\n            } else {\r\n                alert('Failed to Delete Post');\r\n            }\r\n            window.location.reload(false);\r\n        }\r\n\r\n        if(window.confirm('Are you sure you want to delete this post?')) {\r\n            scoped();\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        const scoped = async () => {\r\n            const res = await Fetch(`\r\n                {\r\n                    getComments(id: \"${props.postId}\") {\r\n                        id\r\n                        body\r\n                        author\r\n                    }\r\n                }\r\n            `);\r\n            if(res) {\r\n                setC(res.getComments);\r\n                console.log(res.getComments);\r\n            }\r\n        }\r\n        scoped();\r\n\r\n        if(liked) {\r\n            like();\r\n        } else if(liked == false    ) {\r\n            unlike();\r\n        } else {\r\n            setButton((\r\n                <button disabled=\"true\">Like</button>\r\n            ))\r\n        }\r\n    }, [liked])\r\n\r\n    useEffect(() => {\r\n        if(comments == true) {\r\n            setDisplay((\r\n                <div>\r\n                    {\r\n                        c ? c.map(ca => <List author={ca.author} body={ca.body} />) : <p>Loading...</p>\r\n                    }\r\n                    {\r\n                        sessionStorage.getItem('token') ? \r\n                        <div>\r\n                            <Input id={props.postId} />\r\n                        </div> : \r\n                        <div>\r\n                            <input disabled=\"true\" />\r\n                            <button disabled=\"true\">Comment</button>\r\n                        </div>\r\n                    }\r\n                </div>\r\n            ))\r\n        } else if(comments == false) {\r\n            setDisplay(null);\r\n        }\r\n    }, [comments])\r\n\r\n    useEffect(() => {\r\n        setButton((\r\n            <button onClick={() => setLiked(!liked)}>Like</button>\r\n        ))\r\n\r\n        if(props.author == sessionStorage.getItem('handle')) {\r\n            setDeleteButton(\r\n                (\r\n                    <button onClick={cut}>Delete Post</button>\r\n                )\r\n            )\r\n        } else {\r\n            setDeleteButton(null);\r\n        }\r\n\r\n        if(sessionStorage.getItem(props.postId)) {\r\n            setButton((\r\n                <button disabled=\"true\">Likes</button>\r\n            ))\r\n        }\r\n    }, [])\r\n\r\n    const like = () => {\r\n        const scoped = async () => {\r\n            const res = await Fetch(`\r\n                mutation {\r\n                    likePost(id:\"${props.postId}\", current_like: ${likes})\r\n                } \r\n            `);\r\n            setLikes(res.likePost);\r\n            sessionStorage.setItem(props.postId, 'true');\r\n            setButton((\r\n                <button onClick={() => setLiked(!liked)}>Unlike</button>\r\n            ))\r\n        };\r\n\r\n        scoped();\r\n    }\r\n\r\n    const unlike = () => {\r\n        const scoped = async () => {\r\n            const res = await Fetch(`\r\n                mutation {\r\n                    unlikePost(id: \"${props.postId}\", current_like: ${likes})\r\n                }\r\n            `);\r\n            setLikes(res.unlikePost);\r\n            sessionStorage.removeItem(props.postId);\r\n            setButton((\r\n                <button onClick={() => setLiked(!liked)}>Like</button>\r\n            ))\r\n        }\r\n\r\n        scoped();\r\n\r\n        if(props.author == sessionStorage.getItem('handle')) {\r\n            setDeleteButton((\r\n                <button>\r\n                    <img src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAAclBMVEX///8AAAD7+/vc3NyCgoImJibq6uqTk5NeXl7t7e3X19fOzs7Kysr09PSHh4dBQUERERF1dXVRUVG8vLx7e3vk5OSbm5utra2wsLAhISGdnZ2NjY1oaGg6OjosLCxNTU3BwcGkpKQZGRk0NDRjY2NtbW1RTxaKAAAGvklEQVR4nO2d63qiMBBABRUVFsWiVq3W4uX9X3GXZVtnQgJkCEncb85fA8wRyJ1kNLJFtN89zocsyA7nx24fWbuuHcJkMw0w000Sug7LGIvdZyDjc7dwHZoRwolUr2LyH9zH9wa/knfXAfYkemsRDIK3l850vlr9Sr5ch0nn2EkwCI6uA6Xy0VEwCD5ch0qju+CLKhYagkFQuA5Xn26ZzJMv1wHrspBIHE7HPImT/Hg6SH59tfpNvRxcx+nPr2m8rv3+5jBaAnsx/o1YrkcbMcneSaRE0kx4PhNJokR4VrNUkshXZjj2uTz2dI6TvVCRIdzCuTKhoPg6N/HYUVBUfJ3aG37BmpqAIX5drUXYkxiFLctkniQobWwpwr6gRv26JTEqGCdW4uvPFQa9bUm8hYmvVuLrDYr50Zp8rfN/+AGqc/9qTf4LJv8aPDoT7LpmpP+AyWfDh9dImC7aQTWVS/sRKaykzztdYZguyG2+mZed8u7JDuf5Jjf8xka7m2uvGreduW7I8d21jYL72Ijfot5Y9Ye1gZ6BWlvWM3q3m32+gRVt1cJm0pXr+Duw6tGsTOXjfr7xSVd8hTtYsqIKztvP7QlN3QgNdB058gFS/8fYddRaUMr+c+0slyKPI/fEeXGpxXbWFxTH37OjT5MKwqPYBtCfDyBUtTe+9WWmwqjATfcEOT7ex+G9AoeYax6OSwo/B01wlVmzxIjQwa77FlTg4RG95iJ6Agj5lCVQfq/3Jp3goe39Za5A/XQnrUPhkT4PzqKhZp0DU/rdtwt6m3QKNHT3fe6HRv3rOm8TLA0/farLiISwBatTIsKShtz4sgJswuqU2rBS6nNGg7Manapp8ZKGOlkivIeXwaIzAWxH6dxDmNP4W6MpgbUanZwGlhYH39pNkBROitApLdBcA5+nD9ADhQcuhwrPAEsYqNaR8PH2uMhHBb5ehoFmMPtbMS1gmHrT4nAnhq95DWogaHZjhKgry9eKGxp1yDRfJvQKd5gV44IHilE3QxR6vN/8e1BTYaK1dq+3OCyj21k3NEJ3J2FwZiucIVh59N1ntK8N/BHa6UvxHH+e1dNk5p7JSfJBHKVaEvowO6gruhlpxSsNrxEn1ogvs7+Qs8FZ+7m9oMeow6797B6wowv6PyOqpOfAWCKuFOAb0+ZvAToQ+j3va22i8ZrU5wX4wqX3Dfx2bP+q3gVvpvxGkkqqF5gcMkLVm7lLYCBmZghLDA2eVx8rhi673kI2pMKG1mBDMmxoDTYkw4bWYEMybGgNNiTDhtZgQzJsaA02JMOG1mBDMmxoDTYkw4bWYEMybGgNNiTDhtZgQzJdDaNitsub/oH4+HFs+ngnzHezomEusmvDauHSTDkXMqrmHl2UCnk1a1e9jKljw5+pIIq5dNH3rONMofgzT1A5Ld2tYfFMIjd4zqySf5cKlqpQfYjk1DAEsxil88rhl3TSdxHMnZ+qLuLSEM4Mk35ZC2ccS2f1whmCiufYqSFc1Vn6QR9cQFmWl6BP7RST8pwawi9rpQ9ZqyGcrMuGbKgLG5awIRuyYZWGDamwYQkbsiEbVmnYkAoblrAhG7JhlYYNqbBhCRuyIRtWadiQChuWsCEbsmGVhg2psGEJG7IhG1Zp2JAKG5awIRuyYZWGDamwYQkbsiEbVmnYkAoblrAhG7JhlYYNqbBhCRuyIRtWadiQChuWsCEbsmGVxqUh/Bj9JksDN3KTfc4e3tqjd2q4AEmkayIUIIF0RQG4PcdCfhG3ayqAzWik+0eDJRPkn9uDvbJVm4G7NXx+kH+WJ3luUCvf9jV87tGr2iPH8cof3wt3qBb2GN3/Jbgrfv9ZGkS5DZfr1VvG5YN6nagTvJfLJnyq90APJ9fyEVWH7trwz12Ix00/j0bbuHkPo3AcN20G6t5waNiQzNZLQ5N7dkVDnVgX9Feb3L13AfeV7bmjYi/gjpOZot5DA24wrL97sjlgxc7sfuh3cGaHLyJ6DVX1BhoFPLW8zmWDDxiGaj0wGrBpZPYV1wFlePL1wujAtpt8KS8LoO1Cb4ZPjncGXhs+ezfwnq+9dgGWsEBnDx6GT9+FBw7BaFlRImyaezZZZerC+IwDMP8Y1TZbfdis22wf4uUHuPqHeI1gtdwn8fAk++Wqdu0hSqz0ULuMOw7pAIZCmegWw2XhN4Vrrx/MVmcAy/ZrW0G6PKoZNq7d/rIZTlCWodpn4Ir/e3sEA6PuizTE+NYexIDcbNSlCoeCg2WimHR2daJ3nQ1Szssd83l7QIaZ5/b8/hImxWY1zdoj6002XW2KhNw59BvCmnvkX52bxwAAAABJRU5ErkJggg==\" />\r\n                </button>\r\n            ))\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div key={props.postId} className=\"post-content\">\r\n            <p className=\"post-title\">{props.title}</p>\r\n            <p className=\"post-category\">Category: <a href={`http://localhost:3000/category/${props.category}`}>{props.category}</a></p>\r\n            <p className=\"post-author\">Author: <a href={`http://localhost:3000/user/${props.author}`}>{props.author}</a></p>\r\n            <p className=\"post-body\">{props.children}</p>\r\n            <p className=\"post-likes\">{ likesButton }: {likes}</p>\r\n            <button className=\"post-comment-button\" onClick={() => setComments(!comments)}>Comments</button>\r\n            { display }\r\n            { deleteBut }\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Posts;"]},"metadata":{},"sourceType":"module"}