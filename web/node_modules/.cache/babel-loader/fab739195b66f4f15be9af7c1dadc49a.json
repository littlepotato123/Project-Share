{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\sopan\\\\OneDrive\\\\Documents\\\\Personal Projects\\\\Project-Share\\\\web\\\\src\\\\Pages\\\\New Post\\\\NewPost.js\";\nimport React, { useEffect, useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { Fetch } from '../../Tools';\n\nconst NewPost = () => {\n  const [title, setTitle] = useState('');\n  const [body, setBody] = useState('');\n  const [category, setCategory] = useState('');\n  const [categories, setCategories] = useState(null);\n  const history = useHistory();\n  useEffect(() => {\n    const scoped = async () => {\n      const res = await Fetch(`\n                {\n                    getCategories {\n                        title\n                    }\n                }\n            `);\n      setCategories(res.getCategories);\n    };\n\n    scoped();\n  }, []);\n  console.log(categories);\n\n  const post = () => {\n    const scoped = async () => {\n      const token = sessionStorage.getItem('token');\n      const res = await Fetch(`\n                mutation {\n                    newPost(token: \"${token}\", title: \"${title}\", body: \"${body}\", category: \"${category}\") {\n                        id\n                    }\n                } \n            `);\n\n      if (res.newPost) {\n        history.push('/');\n      } else {\n        alert('Error while posting');\n      }\n    };\n\n    console.log(title, body, category);\n\n    if (title && body && category) {\n      if (category.includes('@') || category.includes('/') || category.includes('?') || category.includes('#') || category.includes('$')) {\n        alert('Wierd Characters in Category');\n      } else {\n        scoped();\n      }\n    } else {\n      alert('Some fields are empty');\n    }\n  };\n\n  const handleKey = e => {\n    if (e.key == \"Enter\") {\n      post();\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    value: title,\n    onChange: e => setTitle(e.target.value),\n    placeholder: \"Title of Post\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"select\", {\n    onChange: e => setCategory(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    value: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 17\n    }\n  }), categories ? categories.map(c => /*#__PURE__*/React.createElement(\"option\", {\n    value: c.title,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 54\n    }\n  }, c.title)) : /*#__PURE__*/React.createElement(Loading, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 100\n    }\n  })), /*#__PURE__*/React.createElement(\"textarea\", {\n    value: body,\n    onChange: e => setBody(e.target.value),\n    placeholder: \"Post Body\",\n    onKeyDown: handleKey,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: post,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 13\n    }\n  }, \"Post\"));\n};\n\nexport default NewPost;","map":{"version":3,"sources":["C:/Users/sopan/OneDrive/Documents/Personal Projects/Project-Share/web/src/Pages/New Post/NewPost.js"],"names":["React","useEffect","useState","useHistory","Fetch","NewPost","title","setTitle","body","setBody","category","setCategory","categories","setCategories","history","scoped","res","getCategories","console","log","post","token","sessionStorage","getItem","newPost","push","alert","includes","handleKey","e","key","target","value","map","c"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport {\r\n    useHistory\r\n} from 'react-router-dom';\r\nimport { Fetch } from '../../Tools';\r\n\r\nconst NewPost = () => {\r\n    const [title, setTitle] = useState('');\r\n    const [body, setBody] = useState('');\r\n    const [category, setCategory] = useState('');\r\n    const [categories, setCategories] = useState(null);\r\n\r\n    const history = useHistory();\r\n\r\n    useEffect(() => {\r\n        const scoped = async () => {\r\n            const res = await Fetch(`\r\n                {\r\n                    getCategories {\r\n                        title\r\n                    }\r\n                }\r\n            `);\r\n            setCategories(res.getCategories);\r\n        };\r\n        scoped();\r\n    }, [])\r\n\r\n    console.log(categories);\r\n\r\n    const post = () => {\r\n        const scoped = async () => {\r\n            const token = sessionStorage.getItem('token');\r\n            const res = await Fetch(`\r\n                mutation {\r\n                    newPost(token: \"${token}\", title: \"${title}\", body: \"${body}\", category: \"${category}\") {\r\n                        id\r\n                    }\r\n                } \r\n            `);\r\n            if(res.newPost) {\r\n                history.push('/');\r\n            } else {\r\n                alert('Error while posting');\r\n            }\r\n        }\r\n        console.log(title, body, category);\r\n\r\n        if(title && body && category) {\r\n            if(category.includes('@') || category.includes('/') || category.includes('?') || category.includes('#') || category.includes('$')) {\r\n                alert('Wierd Characters in Category');\r\n            } else {\r\n                scoped();\r\n            }\r\n        } else {\r\n            alert('Some fields are empty');\r\n        }\r\n    }\r\n\r\n    const handleKey = (e) => {\r\n        if(e.key == \"Enter\") {\r\n            post();\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <input value={title} onChange={e => setTitle(e.target.value)} placeholder=\"Title of Post\" />\r\n            <select onChange={e => setCategory(e.target.value)}>\r\n                <option value=\"\"></option>\r\n                {\r\n                    categories ? categories.map(c => <option value={c.title}>{c.title}</option>) : <Loading />\r\n                }\r\n            </select>\r\n            <textarea value={body} onChange={e => setBody(e.target.value)} placeholder=\"Post Body\" onKeyDown={handleKey}></textarea>\r\n            <button onClick={post}>Post</button>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default NewPost;"]},"metadata":{},"sourceType":"module"}